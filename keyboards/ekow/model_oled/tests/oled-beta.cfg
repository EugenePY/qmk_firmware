adapter driver cmsis-dap
proc program_device () {
    reset halt
    wait_halt
    flash probe 0
    stm32f4x mass_erase 0
    sleep 10
    program ekow_model_oled_beta_via.bin verify reset exit 0x08000000
}

source [find target/stm32f4x.cfg]
adapter speed 10000
init
